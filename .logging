#!/usr/bin/env bash

LEVEL_INFO="INFO"
LEVEL_WARN="WARN"
LEVEL_ERROR="ERROR"
LEVEL_DEBUG="DEBUG"

BLACK="\e[30m"
RED="\e[31m"
GREEN="\e[32m"
YELLOW="\e[33m"
BLUE="\e[34m"
PURPLE="\e[35m"
CYAN="\e[36m"
WHITE="\e[37m"
NONE="\e[39m"
LIGHTRED="\e[91m"
LIGHTGREEN="\e[92m"
LIGHTBLUE="\e[94m"
LIGHTPURPLE="\e[95m"
LIGHTCYAN="\e[96m"

PADDING="      "

function _log () {
  time=$(date +"%d-%m-%Y %H:%M:%S")
  timestamp="${time}"
  case "${1}" in 
    INFO)
      level="${BLUE}${PADDING:${#1}}${1}${NONE}"
      message="${2}"
      ;;
    WARN)
      level="${YELLOW}${PADDING:${#1}}${1}${NONE}"
      message="${2}"
      ;;
    ERROR)
      level="${RED}${PADDING:${#1}}${1}${NONE}"
      message="${LIGHTRED}${2}${NONE}"
      ;;
    DEBUG)
      level="${GREEN}${PADDING:${#1}}${1}${NONE}"
      message="${LIGHTGREEN}${2}${NONE}"
      ;;
  esac

  printf "${timestamp} [${level}] ${message}\n"
}

function log_info () {
  log_msg "${LEVEL_INFO}" true "${1}"
}

function log_warn () {
  log_msg "${LEVEL_WARN}" true "${1}"
}

function log_error () {
  log_msg "${LEVEL_ERROR}" true "${1}"
}

function log_debug () {
  log_msg "${LEVEL_DEBUG}" false "${1}"
}

function log_msg () {
  enabled="$(eval echo \${LOGGING_${1}_ENABLED:-${2}})"
  if [ "${enabled}" = true ]; then
    _log "${1}" "${3}"
  fi
}
