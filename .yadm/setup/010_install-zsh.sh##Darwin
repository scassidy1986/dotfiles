#!/usr/bin/env sh

source ${HOME}/.logging

if command -v zsh >/dev/null 2>&1; then
  log_info "Installing oh-my-zsh"
  sh -c "$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)"
  if [ -d "${HOME}/.yadm/.oh-my-zsh/" ]; then
    ln -nfs "${HOME}/.yadm/.oh-my-zsh/" "${HOME}/.oh-my-zsh"
  fi
  for f in ".zshrc" ".zshenv" ".zlogin"; do
    file="${HOME}/.yadm/${f}" 
    target="${HOME}/${f}"
    log_info "Linking '${file}' to '${target}'"
    ln -nfs ${file} ${target}
  done
else
  log_info "zsh not found"
fi

